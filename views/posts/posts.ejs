<div class="container mt-5">
   <div class="row">
      <div class="card p-3 mb-3">
         <div class="col-12 d-flex justify-content-between align-items-center mb-3">
            <h1 class="m-0 p-0"> Posts</h1>
            <% if(typeof user !== 'undefined') { %>
            <a href="/posts_create" class="btn btn-primary">Create Post</a>
            <% } %>
         </div>
         <div class="col-12">
            <% if(typeof posts !== 'undefined') { %>
            <% posts.forEach((post) => { %>
            <div class="col-12 mb-3">
               <div class="card h-100">
                  <% if(post.image) { %>
                  <div style="max-height:250px;overflow:hidden;border-top-left-radius:3px;border-top-right-radius:3px;">
                     <img class="card-img-top" style="object-fit:contain;" src="/img/posts/<%= post.image %>"
                        alt="<%= post.title %>">
                  </div>
                  <% } %>
                  <div class="card-body">
                     <a href="/posts/<%= post.id %>/<%= post.slug %>" class="text-decoration-none">
                        <h2 class="card-title mb-3"><%= post.title %></h2>
                     </a>
                     <div class="text-muted mb-3">
                        <div>
                           <span>created: <%= moment(post.createdAt).fromNow() %> |</span>
                           <span>updated: <%= moment(post.updatedAt).fromNow() %> |</span>
                           <span>author:
                              <a href="/profile/<%= post.user.username %>"><%= post.user.username %></a></span>
                        </div>
                     </div>
                     <p class="card-text"><%- truncate(post.body, 250) %></p>
                     <a class='btn btn-primary' href="/posts/<%= post.id %>/<%= post.slug %>">Read more ...</a>
                  </div>
               </div>
            </div>
            <% }) %>
            <% } %>
         </div>
      </div>
   </div>
</div>